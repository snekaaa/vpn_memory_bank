{"name": "test_app_settings_with_allure", "status": "failed", "statusDetails": {"message": "AssertionError: Response missing 'data' field\nassert 'data' in {'settings': {'site_domain': 'localhost:8000', 'site_name': 'VPN Без лагов', 'trial_days': 10, 'trial_enabled': True, ...}, 'success': True}", "trace": "@allure.epic(\"VPN Service API\")\n    @allure.feature(\"Integration API\")\n    @allure.story(\"App Settings\")\n    @allure.severity(allure.severity_level.CRITICAL)\n    @pytest.mark.asyncio\n    @pytest.mark.critical\n    async def test_app_settings_with_allure():\n        \"\"\"Тест GET /api/v1/integration/app-settings с Allure отчетами\"\"\"\n    \n        with allure.step(\"Создание HTTP клиента\"):\n            async with httpx.AsyncClient() as client:\n                allure.attach(\n                    \"HTTP Client created\",\n                    \"AsyncClient initialized successfully\",\n                    allure.attachment_type.TEXT\n                )\n    \n                with allure.step(\"Выполнение GET запроса к app-settings\"):\n                    url = \"http://localhost:8000/api/v1/integration/app-settings\"\n                    allure.attach(\"Request URL\", url, allure.attachment_type.TEXT)\n    \n                    try:\n                        response = await client.get(url)\n                        allure.attach(\n                            \"Response Status\",\n                            str(response.status_code),\n                            allure.attachment_type.TEXT\n                        )\n    \n                        with allure.step(\"Валидация ответа\"):\n                            # Проверяем статус код\n                            assert response.status_code in [200, 404, 500], f\"Unexpected status: {response.status_code}\"\n    \n                            # Если сервер не запущен, тест все равно проходит\n                            if response.status_code == 200:\n                                data = response.json()\n                                allure.attach(\n                                    \"Response Data\",\n                                    str(data),\n                                    allure.attachment_type.JSON\n                                )\n    \n                                # Проверяем структуру ответа\n                                assert \"success\" in data, \"Response missing 'success' field\"\n>                               assert \"data\" in data, \"Response missing 'data' field\"\nE                               AssertionError: Response missing 'data' field\nE                               assert 'data' in {'settings': {'site_domain': 'localhost:8000', 'site_name': 'VPN Без лагов', 'trial_days': 10, 'trial_enabled': True, ...}, 'success': True}\n\ntests/integration/test_with_allure.py:50: AssertionError"}, "description": "Тест GET /api/v1/integration/app-settings с Allure отчетами", "steps": [{"name": "Создание HTTP клиента", "status": "failed", "statusDetails": {"message": "AssertionError: Response missing 'data' field\nassert 'data' in {'settings': {'site_domain': 'localhost:8000', 'site_name': 'VPN Без лагов', 'trial_days': 10, 'trial_enabled': True, ...}, 'success': True}\n", "trace": "  File \"/Users/andreynosov/Downloads/vpn_memory_bank kiro — копия для курсора/vpn-service/tests/integration/test_with_allure.py\", line 50, in test_app_settings_with_allure\n    assert \"data\" in data, \"Response missing 'data' field\"\n"}, "steps": [{"name": "Выполнение GET запроса к app-settings", "status": "failed", "statusDetails": {"message": "AssertionError: Response missing 'data' field\nassert 'data' in {'settings': {'site_domain': 'localhost:8000', 'site_name': 'VPN Без лагов', 'trial_days': 10, 'trial_enabled': True, ...}, 'success': True}\n", "trace": "  File \"/Users/andreynosov/Downloads/vpn_memory_bank kiro — копия для курсора/vpn-service/tests/integration/test_with_allure.py\", line 50, in test_app_settings_with_allure\n    assert \"data\" in data, \"Response missing 'data' field\"\n"}, "steps": [{"name": "Валидация ответа", "status": "failed", "statusDetails": {"message": "AssertionError: Response missing 'data' field\nassert 'data' in {'settings': {'site_domain': 'localhost:8000', 'site_name': 'VPN Без лагов', 'trial_days': 10, 'trial_enabled': True, ...}, 'success': True}\n", "trace": "  File \"/Users/andreynosov/Downloads/vpn_memory_bank kiro — копия для курсора/vpn-service/tests/integration/test_with_allure.py\", line 50, in test_app_settings_with_allure\n    assert \"data\" in data, \"Response missing 'data' field\"\n"}, "attachments": [{"name": "{'success': True, 'settings': {'trial_enabled': True, 'trial_days': 10, 'trial_max_per_user': 1, 'site_name': 'VPN Без лагов', 'site_domain': 'localhost:8000'}}", "source": "47baac8c-6e13-4c1b-9f08-c77700c5415b-attachment.json", "type": "application/json"}], "start": 1753273881548, "stop": 1753273881548}], "attachments": [{"name": "http://localhost:8000/api/v1/integration/app-settings", "source": "3d2025b6-8bc0-4ef3-adf7-1c4ba2c73f7d-attachment.txt", "type": "text/plain"}, {"name": "200", "source": "4ade9a53-74f1-4852-932b-f317c663618c-attachment.txt", "type": "text/plain"}], "start": 1753273881451, "stop": 1753273881548}], "attachments": [{"name": "AsyncClient initialized successfully", "source": "20e178ba-59d8-4ffa-8b8b-50d981cf01a6-attachment.txt", "type": "text/plain"}], "start": 1753273881443, "stop": 1753273881549}], "start": 1753273881443, "stop": 1753273881549, "uuid": "8aceeaac-7c46-40e4-a5b0-dd7dc8cd8751", "historyId": "505a5b4a9dbb0569daa1c60bf196eea9", "testCaseId": "505a5b4a9dbb0569daa1c60bf196eea9", "fullName": "tests.integration.test_with_allure#test_app_settings_with_allure", "labels": [{"name": "epic", "value": "VPN Service API"}, {"name": "feature", "value": "Integration API"}, {"name": "severity", "value": "critical"}, {"name": "story", "value": "App Settings"}, {"name": "tag", "value": "critical"}, {"name": "tag", "value": "asyncio"}, {"name": "parentSuite", "value": "tests.integration"}, {"name": "suite", "value": "test_with_allure"}, {"name": "host", "value": "192.168.2.92"}, {"name": "thread", "value": "11434-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "tests.integration.test_with_allure"}], "titlePath": ["tests", "integration", "test_with_allure.py"]}