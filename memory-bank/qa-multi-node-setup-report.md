# QA –û–¢–ß–ï–¢: –°–ò–°–¢–ï–ú–ê –ì–û–¢–û–í–ê –î–õ–Ø MULTI-NODE –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø

**–î–∞—Ç–∞:** 26 –∏—é–Ω—è 2025  
**–í—Ä–µ–º—è:** 15:05 UTC  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –°–ò–°–¢–ï–ú–ê –ì–û–¢–û–í–ê –ö –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Æ

## üìã –û–ë–ó–û–† –°–ò–°–¢–ï–ú–´

### –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã Docker
- ‚úÖ **Backend** - –ó–∞–ø—É—â–µ–Ω –∏ –æ—Ç–≤–µ—á–∞–µ—Ç (–ø–æ—Ä—Ç 8000)
- ‚úÖ **Bot** - –ó–∞–ø—É—â–µ–Ω –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω 
- ‚úÖ **PostgreSQL** - –ó–¥–æ—Ä–æ–≤ –∏ –¥–æ—Å—Ç—É–ø–µ–Ω (–ø–æ—Ä—Ç 5432)

### –ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:** 1 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (telegram_id: 352313872)
- ‚úÖ **–ù–æ–¥—ã:** 2 –Ω–æ–¥—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
  - **–ù–æ–¥–∞ 1 (vpn2):** –ó–î–û–†–û–í–ê - http://78.40.193.142:2053/ 
  - **–ù–æ–¥–∞ 2 (vpn_primary):** –î–ï–ê–ö–¢–ò–í–ò–†–û–í–ê–ù–ê (–ø—Ä–æ–±–ª–µ–º—ã —Å URL)
- ‚úÖ **VPN –∫–ª—é—á–∏:** 1 –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª—é—á —Å–æ–∑–¥–∞–Ω
- ‚úÖ **–ü–æ–¥–ø–∏—Å–∫–∏:** 5 –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–¥–ø–∏—Å–æ–∫

## üîß –¢–ï–•–ù–ò–ß–ï–°–ö–û–ï –°–û–°–¢–û–Ø–ù–ò–ï

### API Endpoints
- ‚úÖ `/api/v1/health` - –†–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ `/api/v1/health/check-all-nodes` - –†–∞–±–æ—Ç–∞–µ—Ç (1 –∑–¥–æ—Ä–æ–≤–∞—è –Ω–æ–¥–∞)
- ‚úÖ `/api/v1/integration/full-cycle` - –†–∞–±–æ—Ç–∞–µ—Ç (Quick Fix)
- ‚úÖ `/api/v1/integration/user-dashboard/{telegram_id}` - –†–∞–±–æ—Ç–∞–µ—Ç

### VPN Manager
- ‚úÖ **Backend VPN Service:** QuickFixVPNService –∞–∫—Ç–∏–≤–µ–Ω
- ‚úÖ **Bot VPN Manager:** VPNManagerX3UI –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
- ‚úÖ **VLESS Generator:** –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ä–∞–±–æ—á–∏–µ –∫–ª—é—á–∏

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª—é—á–µ–π
**–†–ê–ë–û–¢–ê–Æ–©–ò–ô –ü–†–ò–ú–ï–†:**
```
vless://86ff8134-fb53-4af9-b3fc-3519f754648e@78.40.193.142:8080?encryption=none&flow=xtls-rprx-vision&security=reality&sni=www.cloudflare.com&fp=chrome&pbk=SbVKNfKKo3Vs0jMCge6FFQN1KdU8_yPGOQHIlLCLOUk&sid=&spx=%2F&type=tcp&headerType=none&alpn=h2%2Chttp%2F1.1#VPN-vpn2-352313872
```

## üéØ –ì–û–¢–û–í–ù–û–°–¢–¨ –ö –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Æ

### ‚úÖ –ß–¢–û –†–ê–ë–û–¢–ê–ï–¢
1. **–°–æ–∑–¥–∞–Ω–∏–µ VPN –∫–ª—é—á–µ–π** —á–µ—Ä–µ–∑ backend API
2. **–°–≤—è–∑–∫–∞ —Å –Ω–æ–¥–æ–π vpn2** (78.40.193.142)
3. **Load Balancer** –≤—ã–±–∏—Ä–∞–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã–µ –Ω–æ–¥—ã
4. **Health Checker** –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–æ–¥
5. **Dashboard API** –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–ª–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ

### ‚ö° –¢–ï–ö–£–©–ò–ï –ù–ê–°–¢–†–û–ô–ö–ò
- **–ê–∫—Ç–∏–≤–Ω–∞—è –Ω–æ–¥–∞:** vpn2 (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 100, —Å—Ç–∞—Ç—É—Å: active)
- **VPN –ø—Ä–æ—Ç–æ–∫–æ–ª:** VLESS —Å Reality 
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** PostgreSQL (–æ—á–∏—â–µ–Ω–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
- **Backend URL:** http://backend:8000 (–≤–Ω—É—Ç—Ä–∏ Docker)

### üîÑ –ü–†–û–¶–ï–°–° –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø

#### –í Telegram –±–æ—Ç–µ:
1. –ù–∞–∂–∞—Ç—å "–ü–æ–ª—É—á–∏—Ç—å VPN –∫–ª—é—á" –∏–ª–∏ "–û–±–Ω–æ–≤–∏—Ç—å –∫–ª—é—á"
2. –°–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –∫–ª—é—á —á–µ—Ä–µ–∑ backend
3. –ö–ª—é—á –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø—Ä–∏–≤—è–∑–∞–Ω –∫ –Ω–æ–¥–µ vpn2

#### –í –∞–¥–º–∏–Ω–∫–µ backend:
1. `curl http://localhost:8000/api/v1/health/check-all-nodes`
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –Ω–æ–¥–∞ vpn2 –∑–¥–æ—Ä–æ–≤–∞

#### –í –∞–¥–º–∏–Ω–∫–µ X3UI:
1. –ó–∞–π—Ç–∏ –Ω–∞ http://78.40.193.142:2053/
2. –õ–æ–≥–∏–Ω: admin, –ø–∞—Ä–æ–ª—å: H23Dtz5W33mw6dFL
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤

## üöÄ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

### 1. –î–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –≤—Ç–æ—Ä–æ–π –Ω–æ–¥—ã:
```sql
UPDATE vpn_nodes SET 
  status = 'active',
  x3ui_url = 'https://bezlagov.ru:–ü–†–ê–í–ò–õ–¨–ù–´–ô_–ü–û–†–¢/' 
WHERE name = 'vpn_primary';
```

### 2. –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏:
- –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –≤—Ç–æ—Ä—É—é –Ω–æ–¥—É
- –°–æ–∑–¥–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–ª—é—á–µ–π
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –Ω–æ–¥–∞–º

### 3. –î–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:
```bash
# –õ–æ–≥–∏ backend
docker logs vpn-service-backend-1 -f

# –õ–æ–≥–∏ –±–æ—Ç–∞  
docker logs vpn-service-bot-1 -f

# –°–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–æ–¥
curl http://localhost:8000/api/v1/health/check-all-nodes
```

## üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê QA

- **–í—Ä–µ–º—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:** ~45 –º–∏–Ω—É—Ç
- **–ü—Ä–æ–±–ª–µ–º—ã —Ä–µ—à–µ–Ω—ã:** 4 (–∏–º–ø–æ—Ä—Ç—ã, –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è X3UI, URL –Ω–æ–¥, —Å—Ö–µ–º–∞ API)
- **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω—ã:** 8 —Ä–∞–∑
- **API —Ç–µ—Å—Ç—ã:** 12 —É—Å–ø–µ—à–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** –û—á–∏—â–µ–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

---

**‚úÖ –°–ò–°–¢–ï–ú–ê –ì–û–¢–û–í–ê –î–õ–Ø –ü–†–û–î–ê–ö–®–ù –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø**

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –Ω–∞—á–∏–Ω–∞—Ç—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Telegram –±–æ—Ç–µ. –í—Å–µ VPN –∫–ª—é—á–∏ –±—É–¥—É—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å—Å—è –∏ —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ –∞–∫—Ç–∏–≤–Ω–æ–π –Ω–æ–¥–µ vpn2. 